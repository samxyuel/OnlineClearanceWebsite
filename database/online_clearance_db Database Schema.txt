Database Schema: online_clearance_db
academic_years
Column Name	Data Type/Details
academic_year_id	int(11) NOT NULL (Primary Key)
year	varchar(9) NOT NULL (Format: 2024-2025)
is_active	tinyint(1) DEFAULT 0 (Only one can be active at a time)
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


audit_logs
Column Name	Data Type/Details
log_id	int(11) NOT NULL (Primary Key)
user_id	int(11) DEFAULT NULL
action	varchar(255) NOT NULL (e.g., "User Login", "Clearance Approved")
entity_type	varchar(50) DEFAULT NULL (e.g., "User", "Clearance")
entity_id	int(11) DEFAULT NULL
old_values	longtext (Previous state of the record)
new_values	longtext (New state of the record)
ip_address	varchar(45) DEFAULT NULL
user_agent	text DEFAULT NULL
created_at	timestamp NOT NULL DEFAULT current_timestamp()


bulk_operations
Column Name	Data Type/Details
operation_id	int(11) NOT NULL (Primary Key)
user_id	int(11) DEFAULT NULL (User who initiated the operation)
operation_type	varchar(50) NOT NULL (e.g., "Bulk Approve")
target_count	int(11) NOT NULL
success_count	int(11) DEFAULT 0
failure_count	int(11) DEFAULT 0
operation_data	longtext (Details of the operation)
status	enum('In Progress','Completed','Failed','Cancelled') DEFAULT 'In Progress'
progress_percentage	decimal(5,2) DEFAULT 0.00
started_at	timestamp NOT NULL DEFAULT current_timestamp()
completed_at	timestamp NULL DEFAULT NULL
error_message	text DEFAULT NULL


clearance_applications
Column Name	Data Type/Details
application_id	int(11) NOT NULL (Primary Key)
user_id	int(11) NOT NULL
period_id	int(11) NOT NULL
status	enum('pending','in-progress','completed','rejected') DEFAULT 'pending'
applied_at	timestamp NOT NULL DEFAULT current_timestamp()
completed_at	timestamp NULL DEFAULT NULL
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


clearance_forms
Column Name	Data Type/Details
clearance_form_id	varchar(20) NOT NULL (Primary Key, Format: CF-YYYY-XXXXX)
user_id	int(11) DEFAULT NULL
academic_year_id	int(11) DEFAULT NULL
semester_id	int(11) DEFAULT NULL
clearance_type	enum('College','Senior High School','Faculty') NOT NULL
clearance_form_progress	enum('unapplied','in-progress','complete') NOT NULL DEFAULT 'unapplied'
applied_at	timestamp NULL DEFAULT NULL
completed_at	timestamp NULL DEFAULT NULL
rejected_at	timestamp NULL DEFAULT NULL
grace_period_ends	timestamp NULL DEFAULT NULL
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


clearance_periods
Column Name	Data Type/Details
period_id	int(11) NOT NULL (Primary Key)
academic_year_id	int(11) DEFAULT NULL
semester_id	int(11) DEFAULT NULL
sector	enum('College','Senior High School','Faculty') NOT NULL DEFAULT 'College'
period_name	varchar(100) DEFAULT NULL
start_date	date NOT NULL
end_date	date NOT NULL
ended_at	datetime DEFAULT NULL
is_active	tinyint(1) DEFAULT 0
status	enum('Not Started','Ongoing','Paused','Closed') NOT NULL DEFAULT 'Not Started'
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


clearance_requirements
Column Name	Data Type/Details
requirement_id	int(11) NOT NULL (Primary Key)
clearance_type	enum('College','Senior High School','Faculty') NOT NULL
designation_id	int(11) NOT NULL
is_required	tinyint(1) DEFAULT 1
order_sequence	int(11) DEFAULT 0
is_department_specific	tinyint(1) DEFAULT 0
applies_to_departments	longtext (Array of department IDs)
created_at	timestamp NOT NULL DEFAULT current_timestamp()


clearance_signatories
Column Name	Data Type/Details
clearance_signatory_id	int(11) NOT NULL (Primary Key)
clearance_form_id	varchar(20) NOT NULL
designation_id	int(11) NOT NULL
signatory_user_id	int(11) DEFAULT NULL
status	enum('Pending','Approved','Rejected','Optional/Skipped') NOT NULL DEFAULT 'Pending'
signed_at	timestamp NULL DEFAULT NULL
rejection_reason_id	int(11) DEFAULT NULL
additional_remarks	text DEFAULT NULL
is_required	tinyint(1) DEFAULT 1
is_optional	tinyint(1) DEFAULT 0
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


clearance_signatories_new
Column Name	Data Type/Details
signatory_id	int(11) NOT NULL (Primary Key)
staff_id	varchar(8) NOT NULL (Employee number)
clearance_period_id	int(11) NOT NULL
designation_id	int(11) NOT NULL
department_id	int(11) DEFAULT NULL
is_required_first	tinyint(1) DEFAULT 0
is_required_last	tinyint(1) DEFAULT 0
is_active	tinyint(1) DEFAULT 1
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


departments
Column Name	Data Type/Details
department_id	int(11) NOT NULL (Primary Key)
department_name	varchar(100) NOT NULL
department_code	varchar(10) NOT NULL
is_college	tinyint(1) DEFAULT 1 (1 for College, 0 for SHS/Other)
is_active	tinyint(1) DEFAULT 1
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


designations
Column Name	Data Type/Details
designation_id	int(11) NOT NULL (Primary Key)
designation_name	varchar(100) NOT NULL
short_name	varchar(20) DEFAULT NULL
user_type	enum('Admin','Staff','Student','Faculty') NOT NULL
is_signatory	tinyint(1) DEFAULT 0 (1 if can sign clearance forms)
is_department_head	tinyint(1) DEFAULT 0
is_active	tinyint(1) DEFAULT 1
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


faculty
Column Name	Data Type/Details
faculty_id	int(11) NOT NULL (Primary Key)
user_id	int(11) NOT NULL
employee_number	varchar(8) NOT NULL
department_id	int(11) DEFAULT NULL
is_active	tinyint(1) DEFAULT 1
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


programs
Column Name	Data Type/Details
program_id	int(11) NOT NULL (Primary Key)
program_name	varchar(100) NOT NULL
program_code	varchar(20) NOT NULL
full_name	varchar(255) DEFAULT NULL (Full name including Track/Strand for SHS)
department_id	int(11) DEFAULT NULL
is_active	tinyint(1) DEFAULT 1
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


rejection_reasons
Column Name	Data Type/Details
reason_id	int(11) NOT NULL (Primary Key)
reason_name	varchar(100) NOT NULL
reason_category	enum('student','faculty','both') NOT NULL
is_active	tinyint(1) DEFAULT 1
created_at	timestamp NOT NULL DEFAULT current_timestamp()


rejection_remarks
Column Name	Data Type/Details
remark_id	int(11) NOT NULL (Primary Key)
signatory_id	int(11) DEFAULT NULL
reason_id	int(11) DEFAULT NULL
additional_remarks	text DEFAULT NULL
created_at	timestamp NOT NULL DEFAULT current_timestamp()


roles
Column Name	Data Type/Details
role_id	int(11) NOT NULL (Primary Key)
role_name	varchar(50) NOT NULL (e.g., Admin, Staff, Student)
description	text DEFAULT NULL
is_active	tinyint(1) DEFAULT 1
created_at	timestamp NOT NULL DEFAULT current_timestamp()


semesters
Column Name	Data Type/Details
semester_id	int(11) NOT NULL (Primary Key)
semester_name	enum('1st','2nd','Summer') NOT NULL
is_active	tinyint(1) DEFAULT 0 (Only one can be active at a time)
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


staff
Column Name	Data Type/Details
staff_id	int(11) NOT NULL (Primary Key)
user_id	int(11) NOT NULL
employee_number	varchar(8) NOT NULL
designation_id	int(11) DEFAULT NULL
department_id	int(11) DEFAULT NULL
is_active	tinyint(1) DEFAULT 1
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


students
Column Name	Data Type/Details
student_id	int(11) NOT NULL (Primary Key)
user_id	int(11) NOT NULL
student_number	varchar(15) NOT NULL
program_id	int(11) DEFAULT NULL
academic_year_id	int(11) DEFAULT NULL
student_type	enum('College','Senior High School') NOT NULL
section_year	varchar(20) DEFAULT NULL (e.g., 4BSIT-A)
year_level	varchar(10) DEFAULT NULL (e.g., 1st Year)
is_active	tinyint(1) DEFAULT 1
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


system_settings
Column Name	Data Type/Details
setting_key	varchar(50) NOT NULL (Primary Key)
setting_value	text DEFAULT NULL
data_type	varchar(20) NOT NULL (e.g., string, integer, boolean)
description	text DEFAULT NULL
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
updated_by	int(11) DEFAULT NULL (User ID of the last updater)


user_activities
Column Name	Data Type/Details
activity_id	int(11) NOT NULL (Primary Key)
user_id	int(11) NOT NULL
activity_type	varchar(50) NOT NULL (e.g., login, logout)
details	longtext (JSON format)
ip_address	varchar(45) DEFAULT NULL
user_agent	text DEFAULT NULL
created_at	timestamp NOT NULL DEFAULT current_timestamp()


user_designations
Column Name	Data Type/Details
user_id	int(11) NOT NULL (Primary Key/Composite)
designation_id	int(11) NOT NULL (Primary Key/Composite)
assigned_at	timestamp NOT NULL DEFAULT current_timestamp()
is_primary	tinyint(1) DEFAULT 0


user_roles
Column Name	Data Type/Details
user_id	int(11) NOT NULL (Primary Key/Composite)
role_id	int(11) NOT NULL (Primary Key/Composite)
assigned_at	timestamp NOT NULL DEFAULT current_timestamp()
assigned_by	int(11) DEFAULT NULL
is_primary	tinyint(1) DEFAULT 0


users
Column Name	Data Type/Details
user_id	int(11) NOT NULL (Primary Key)
username	varchar(50) NOT NULL
password	varchar(255) NOT NULL
email	varchar(100) DEFAULT NULL
first_name	varchar(50) NOT NULL
last_name	varchar(50) NOT NULL
middle_name	varchar(50) DEFAULT NULL
contact_number	varchar(20) DEFAULT NULL
account_status	enum('active','inactive','pending','suspended') NOT NULL DEFAULT 'active'
last_login	timestamp NULL DEFAULT NULL
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


users_backup_before_sync
Column Name	Data Type/Details
user_id	int(11) NOT NULL (Primary Key)
username	varchar(50) NOT NULL
password	varchar(255) NOT NULL
first_name	varchar(50) NOT NULL
last_name	varchar(50) NOT NULL
user_type	varchar(7) NOT NULL
employee_number	varchar(8) NOT NULL