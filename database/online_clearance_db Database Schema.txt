Database Schema: online_clearance_db
academic_years
Column Name	Data Type/Details
academic_year_id	int(11) NOT NULL (Primary Key)
year	varchar(9) NOT NULL (Format: 2024-2025)
is_active	tinyint(1) DEFAULT 0 (Only one can be active at a time)
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


audit_logs
Column Name	Data Type/Details
log_id	int(11) NOT NULL (Primary Key)
user_id	int(11) DEFAULT NULL
action	varchar(255) NOT NULL (e.g., "User Login", "Clearance Approved")
entity_type	varchar(50) DEFAULT NULL (e.g., "User", "Clearance")
entity_id	int(11) DEFAULT NULL
old_values	longtext (Previous state of the record)
new_values	longtext (New state of the record)
ip_address	varchar(45) DEFAULT NULL
user_agent	text DEFAULT NULL
created_at	timestamp NOT NULL DEFAULT current_timestamp()


bulk_operations
Column Name	Data Type/Details
operation_id	int(11) NOT NULL (Primary Key)
user_id	int(11) DEFAULT NULL (User who initiated the operation)
operation_type	varchar(50) NOT NULL (e.g., "Bulk Approve")
target_count	int(11) NOT NULL
success_count	int(11) DEFAULT 0
failure_count	int(11) DEFAULT 0
operation_data	longtext (Details of the operation)
status	enum('In Progress','Completed','Failed','Cancelled') DEFAULT 'In Progress'
progress_percentage	decimal(5,2) DEFAULT 0.00
started_at	timestamp NOT NULL DEFAULT current_timestamp()
completed_at	timestamp NULL DEFAULT NULL
error_message	text DEFAULT NULL


clearance_applications
Column Name	Data Type/Details
application_id	int(11) NOT NULL (Primary Key)
user_id	int(11) NOT NULL
period_id	int(11) NOT NULL
status	enum('pending','in-progress','completed','rejected') DEFAULT 'pending'
applied_at	timestamp NOT NULL DEFAULT current_timestamp()
completed_at	timestamp NULL DEFAULT NULL
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


clearance_forms
Column Name	Data Type/Details
clearance_form_id	varchar(20) NOT NULL (Primary Key, Format: CF-YYYY-XXXXX)
user_id	int(11) DEFAULT NULL
academic_year_id	int(11) DEFAULT NULL
semester_id	int(11) DEFAULT NULL
clearance_type	enum('College','Senior High School','Faculty') NOT NULL
clearance_form_progress	enum('unapplied','in-progress','complete') NOT NULL DEFAULT 'unapplied' 
applied_at	timestamp NULL DEFAULT NULL (When user first applied)
completed_at	timestamp NULL DEFAULT NULL (When all signatories approved)
rejected_at	timestamp NULL DEFAULT NULL (When any signatory rejected)
grace_period_ends	timestamp NULL DEFAULT NULL (End of grace period for final status update)
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


clearance_periods
Column Name	Data Type/Details
period_id	int(11) NOT NULL AUTO_INCREMENT (Primary Key)
academic_year_id	int(11) DEFAULT NULL
semester_id	int(11) DEFAULT NULL
sector	enum('College','Senior High School','Faculty') NOT NULL DEFAULT 'College'
period_name	varchar(100) DEFAULT NULL
start_date	date NOT NULL
end_date	date NOT NULL
ended_at	datetime DEFAULT NULL
is_active	tinyint(1) DEFAULT 0
status	enum('Not Started','Ongoing','Paused','Closed') NOT NULL DEFAULT 'Not Started'
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


clearance_requirements
Column Name	Data Type/Details
requirement_id	int(11) NOT NULL (Primary Key)
clearance_type	enum('College','Senior High School','Faculty') NOT NULL
designation_id	int(11) NOT NULL
is_required	tinyint(1) DEFAULT 1
order_sequence	int(11) DEFAULT 0
is_department_specific	tinyint(1) DEFAULT 0
applies_to_departments	longtext (Array of department IDs)
created_at	timestamp NOT NULL DEFAULT current_timestamp()


clearance_signatories
Column Name	Data Type/Details
clearance_signatory_id	int(11) NOT NULL (Primary Key)
clearance_form_id	varchar(20) DEFAULT NULL
designation_id	int(11) DEFAULT NULL
actual_user_id	int(11) DEFAULT NULL (Staff member who actually signed (for override))
action	enum('Pending','Approved','Rejected') DEFAULT 'Pending'
remarks text DEFAULT NULL (General remarks)
rejection_reason_id	int(11) DEFAULT NULL (Predefined rejection reason)
additional_remarks	text DEFAULT NULL (Additional details for rejection)
date_signed timestamp DEFAULT NULL (When action was taken)
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


clearance_signatories_new
Column Name	Data Type/Details
signatory_id	int(11) NOT NULL (Primary Key)
staff_id	varchar(8) NOT NULL (Employee number)
clearance_period_id	int(11) NOT NULL
designation_id	int(11) NOT NULL
department_id	int(11) DEFAULT NULL
is_required_first	tinyint(1) DEFAULT 0
is_required_last	tinyint(1) DEFAULT 0
is_active	tinyint(1) DEFAULT 1
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


departments
Column Name	Data Type/Details
department_id	int(11) NOT NULL (Primary Key)
department_name	varchar(100) NOT NULL
department_code	varchar(10) NOT NULL
department_type enum('College', 'Senior High School', 'Faculty') DEFAULT NULL
is_active	tinyint(1) DEFAULT 1
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
sector_id 	int(11) DEFAULT NULL


designations
Column Name	Data Type/Details
designation_id	int(11) NOT NULL (Primary Key)
designation_name	varchar(100) NOT NULL
is_active	tinyint(1) DEFAULT 1
created_at	timestamp NOT NULL DEFAULT current_timestamp()


faculty
Column Name	Data Type/Details
employee_number	varchar(8) NOT NULL (Primary Key)
user_id	int(11) DEFAULT NULL
employment_status enum('Full Time','Part Time','Part Time - Full Load') NOT NULL
department_id	int(11) DEFAULT NULL
sector enum('College', 'Senior High School', 'Faculty') NOT NULL DEFAULT (Faculty)
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


permissions
Column Name	Data Type/Details
permission_id int(11) NOT NULL (Primary Key) AUTO_INCREMENT
permission_name varchar(100) NOT NULL
description text DEFAULT NULL
category varchar(50) DEFAULT NULL
is_active tinyint(1) DEFAULT 1

programs
Column Name	Data Type/Details
program_id	int(11) NOT NULL (Primary Key)  
program_name	varchar(100) NOT NULL
program_code	varchar(10) DEFAULT NULL
description text DEFAULT NULL
department_id	int(11) DEFAULT NULL
is_active	tinyint(1) DEFAULT 1
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


rejection_reasons
Column Name	Data Type/Details
reason_id	int(11) NOT NULL (Primary Key)
reason_name	varchar(100) NOT NULL
reason_category	enum('student','faculty','both') NOT NULL
is_active	tinyint(1) DEFAULT 1
created_at	timestamp NOT NULL DEFAULT current_timestamp()


rejection_remarks
Column Name	Data Type/Details
remark_id	int(11) NOT NULL (Primary Key)
signatory_id	int(11) DEFAULT NULL
reason_id	int(11) DEFAULT NULL
additional_remarks	text DEFAULT NULL
created_at	timestamp NOT NULL DEFAULT current_timestamp()


roles
Column Name	Data Type/Details
role_id	int(11) NOT NULL (Primary Key)
role_name	varchar(50) NOT NULL (e.g., Admin, Staff, Student)
description	text DEFAULT NULL
is_active	tinyint(1) DEFAULT 1
created_at	timestamp NOT NULL DEFAULT current_timestamp()


role_permissions
Column Name	Data Type/Details
role_id	int(11) NOT NULL
permission_id	int(11) NOT NULL
granted_at timestamp NOT NULL current_timestamp()
granted_by int DEFAULT NULL (Admin who granted this permission)
 

scope_settings
Column Name	Data Type/Details
clearance_type 	varchar(16) NOT NULL (Primary Key)
include_program_head tinyint(1)	DEFAULT 0
updated_at timestamp NOT NULL current_timestamp() ON UPDATE current_timestamp()
required_first_enabled tinyint(1) DEFAULT 0
required_first_designation_id int(11) DEFAULT NULL
required_last_enabled tinyint(1) DEFAULT 0
required_last_designation_id int(11) DEFAULT NULL


sectors
Column Name	Data Type/Details
sector_id int(11) NOT NULL (Primary Key) AUTO_INCREMENT
sector_name varchar(100) NOT NULL
created_at datetime DEFAULT current_timestamp()
updated_at datetime DEFAULT current_timestamp() ON UPDATE current_timestamp()


sector_clearance_settings
Column Name	Data Type/Details
setting_id int(11) NOT NULL DEFAULT None (Primary Key) AUTO_INCREMENT
clearance_type enum('College', 'Senior High School', 'Faculty') NOT NULL DEFAULT None
include_program_head tinyint(1) DEFAULT 0 (	TRUE if Program Heads should be auto-assigned)
required_first_enabled tinyint(1) DEFAULT 0 (TRUE if required first signatory is enabled)
required_first_designation_id int(11) DEFAULT NULL (Designation that must sign first)
required_last_enabled tinyint(1) DEFAULT 0 (TRUE if required last signatory is enabled)
required_last_designation_id int(11) DEFAULT NULL (Designation that must sign last)
created_at timestamp DEFAULT current_timestamp()
updated_at timestamp DEFAULT current_timestamp() ON UPDATE current_timestamp()


sector_signatory_assignments
Column Name	Data Type/Details
assignment_id int(11) NOT NULL (Primary Key)
clearance_type enum('College', 'Senior High School', 'Faculty') NOT NULL
user_id int(11) NOT NULL (Staff member assigned as signatory)
designation_id int(11) NOT NULL (Designation/position of the signatory)
is_program_head tinyint(1) DEFAULT 0 (TRUE if this is a Program Head assignment)
department_id int(11) DEFAULT NULL (Specific department for Program Head (NULL for general staff))
is_required_first tinyint(1) DEFAULT 0 (TRUE if this is a required first signatory)
is_required_last tinyint(1) DEFAULT 0 (TRUE if this is a required last signatory)
is_active tinyint(1) DEFAULT 1 (FALSE to temporarily disable assignment)
created_at timestamp DEFAULT current_timestamp()
updated_at timestamp DEFAULT current_timestamp() ON UPDATE current_timestamp()


semesters
Column Name	Data Type/Details
semester_id	int(11) NOT NULL (Primary Key)
semester_name	enum('1st','2nd','Summer') NOT NULL
academic_year_id int(11) DEFAULT NULL 
is_active	tinyint(1) DEFAULT 0 (Only one can be active at a time)
is_generation tinyint(1) DEFAULT 0 (Active for clearance generation)
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


staff
Column Name	Data Type/Details
employee_number	varchar(8) NOT NULL (Primary Key) (Employee Number format: LCAXXXXP)
user_id	int(11) DEFAULT NULL
designation_id	int(11) DEFAULT NULL
staff_category enum('Regular Staff','Program Head','School Administrator') NOT NULL
department_id	int(11) DEFAULT NULL (For program heads and department-specific staff)
employment_status enum('Full Time','Part Time','Part Time - Full Load') DEFAULT NULL (For faculty-staff dual roles)
is_active	tinyint(1) DEFAULT 1
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


students
Column Name	Data Type/Details
student_id	int(11) NOT NULL (Primary Key)
user_id	int(11) DEFAULT NULL
program_id	int(11) DEFAULT NULL
department_id int(11) DEFAULT NULL
sector enum('College', 'Senior High School') DEFAULT NULL
section	varchar(20) DEFAULT NULL (e.g., "4/1-1", "3/1-2")
year_level	enum('1st Year','2nd Year','3rd Year','4th Year') DEFAULT NULL
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


system_settings
Column Name	Data Type/Details
setting_id int(11) NOT NULL (Primary Key)
setting_key	varchar(100) NOT NULL (e.g., "clearance_period_duration", "max_bulk_operation_size"	)
setting_value	text DEFAULT NULL (Value of the setting)
setting_type enum('string','integer','boolean','json','decimal') DEFAULT string
description	text DEFAULT NULL (Human-readable description)
is_editable tinyint(1) DEFAULT 1 (	Whether admins can change this setting)
category varchar(50) DEFAULT NULL (Grouping for settings (security, performance, features))
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
updated_by	int(11) DEFAULT NULL (User who last modified this setting)


users
Column Name	Data Type/Details
user_id	int(11) NOT NULL (Primary Key)
username	varchar(50) NOT NULL
password	varchar(255) NOT NULL
email	varchar(255) DEFAULT NULL
first_name	varchar(50) NOT NULL
last_name	varchar(50) NOT NULL
middle_name	varchar(50) DEFAULT NULL
contact_number	varchar(20) DEFAULT NULL
account_status	enum('active','inactive') DEFAULT 'active'
can_apply tinyint(1) NOT NULL DEFAULT 1
last_login	timestamp NULL DEFAULT NULL
created_at	timestamp NOT NULL DEFAULT current_timestamp()
updated_at	timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()


users_backup_before_sync
Column Name	Data Type/Details
user_id	int(11) NOT NULL (Primary Key)
username	varchar(50) NOT NULL
password	varchar(255) NOT NULL
first_name	varchar(50) NOT NULL
last_name	varchar(50) NOT NULL
user_type	varchar(7) NOT NULL
employee_number	varchar(8) NOT NULL


user_activities
Column Name	Data Type/Details
activity_id int(11) NOT NULL (Primary Key)
user_id int(11) DEFAULT NULL
activity_type varchar(50) NOT NULL (e.g., "Login", "Clearance Apply", "Profile Update")
activity_details NULL DEFAULT NULL (Additional activity information)
ip_address varchar(45) NULL DEFAULT NULL
user_agent text NULL DEFAULT NULL
created_at timestamp NOT NULL DEFAULT current_timestamp()


user_roles
Column Name	Data Type/Details
user_id	int(11) NOT NULL (Primary Key/Composite)
role_id	int(11) NOT NULL (Primary Key/Composite)
assigned_at	timestamp NOT NULL DEFAULT current_timestamp()
assigned_by	int(11) DEFAULT NULL
is_primary	tinyint(1) DEFAULT 0


